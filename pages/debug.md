# デバッグ
バグを"綺麗に"取り除く

デバッグを行う際、printステートを用いていないだろうか？

最もシンプルだし、最低限のインターフェースさえあれば使える。

しかし問題は、
バグを除去できた嬉しさのあまり<b class="warn">printステートメントを消し忘れてしまう</b>ことだ[^1]

ここからは、<b class="safe">うっかりコードを汚してしまうことなくデバッグを行う方法</b>を紹介する。

[^1]: 筆者は、数千もの意味不明なデバッグメッセージが放置されたコードの保守を任されたことがある。

---

## デバッガー

VSCodeのデバッガーは極めて優れている。

これを覚えてしまうと<b class="safe">もう他の方法でデバッグを行うことは考えられない</b>ほど。

コードの実行を任意の位置で一時停止したり、行ごとにステップ実行したりすることができる。

変数の型やサイズ、格納された値を常に一覧確認したり、変数の値を変更することも可能。

<div class="small-center">
  <img src="/img/debugger.png"/>
</div>
<!-- ![debugger](img/debugger.png) -->

[画像引用: https://zenn.dev/karaage0703/books/80b6999d429abc8051bb/viewer/898591]

---

前述の機能だけなら多くのデバッガーでも可能。

VSCodeのデバッガーの凄い所は、**条件付きブレークポイント[^1]**や**ウォッチ式[^2]**といった便利な機能も備えている。

全てを紹介するには余白が狭すぎるので、[公式ドキュメント](https://code.visualstudio.com/docs/editor/debugging)や、[初心者向けの記事](https://zenn.dev/karaage0703/books/80b6999d429abc8051bb/viewer/898591)、[応用テクニックのまとめ記事](https://qiita.com/_ken_/items/c5aa4841be74b06530b4)を参照されたい。

ただし、ロボット開発で用いる言語やOSのバージョンが古すぎたりして、デバッガーが使えないこともある点に注意。

[^1]: 特定の条件を満たしたときにブレークポイントを設定する機能
[^2]: 特定の変数の値を常に監視し、変更があった場合に通知する機能

---

## ラバーダッキング

ラバーダッキングとは、プログラムのバグを見つけるために、<b class="safe">他者に向かってコードの処理内容を一行ずつ説明する</b>こと。

ラバーダックとあるように、元はラバー製のアヒルを相手にしていた手法。冗談じみているが非常に効果的である。

コードを1から他者に説明することで、どこに問題があるのかを整理しやすくなる。

お気に入りの人形でも良いし、手元にある小道具でも構わない。行き詰まったときには、ラバーダッキングを試してみよう。

<div class="min-center">
  <img src="/img/rubberduck_key-visial.webp"/>
</div>

<!-- ![rubber_duck](img/rubberduck_key-visial.webp) -->

[画像引用: https://basixs.com/times/columns/rubberduck/]

---

## ペーパーデバッギング

カッコいい名前だが、単に紙に書くだけのデバッグ手法。

結局のところ、最終手段として<b class="safe">紙に書くことを検討するのが非常に有効</b>である。

データのフローはえてして複雑になりがちで<b class="warn">脳内やメモ帳アプリで表現するのが難しい</b>。

紙に書くことで<b class="safe">データの流れを視覚的に理解しやすくなり</b>、バグの原因を見つけやすくなる。

<div class="min-center">
  <img src="/img/note-taking-760x400.jpeg"/>
</div>

<!-- ![paper_debugging](img/note-taking-760x400.jpeg) -->

[画像引用: https://www.grammarly.com/blog/note-taking/]