---

> Don’t ask permission to refactor, test, document etc. It’s all part of ‘programming’. Don’t ask permission to do your job.
> 
> リファクタリング、テスト、ドキュメント化をするための許可なんて求めるな。それら全てはプログラミングの一部。自分の仕事をするための許可なんて求めるな。
> <div style="text-align: right;">Jerome Terry</div>

---

# リファクタリング
## What?
外部から見たときの振る舞いを保ちつつ、理解や修正が簡単になるように、ソフトウェアの内部構造を変化させること

## Why?
- 設計品質の向上
- ソフトウェアを理解しやすくする
- バグの発見
- 開発速度の向上
## When?
### 不吉な匂いを感じたとき
### コードの複雑性評価ツール
### 機能追加時やバグ修正時
### コードレビュー時
## How?
### 必ずテストを書く

### 2つの帽子をかぶらない

### コードの行数にこだわらない
「できるだけ短い行数で高度な処理を書けるプログラマーが偉い」という風潮は少なからずある。

たしかに、短い行数で高度な処理を書けるプログラマーは頭の回転が早いし、それを競う大会だってあるが、開発現場では**コードの行数が少ないことが全てではない**。

一方で、コードベースの複雑性を評価するために、コードベース全体の行数（LOC: Lines of Code）を測る手段を用いることもある。

LOCが大きいからうちのチームはレベルの高い開発をしてるんだ！という風潮もあるが、これもまた誤解を招く可能性がある。

たしかにコードの行数が多いことは「過度に複雑な可能性」を示すこともあるが、あくまでLOCはコードの品質を示す指標の1つ。

就活とかで「今まで扱ったライブラリで書いた最大コード行数は？」とか聞かれることもある（筆者談）かもしれないが、ハッキリ言ってボイラープレートコードでいくらでも膨れ上がるので、あまり意味のない質問。

"他者"がコードを読むとき、
"分かりやすい10行のコード"と"難解な1行のコード"では、
後者の方が悪質なことも珍しくない

本当に気に掛けないといけないのは
- 分かりやすいか
- 誤解されづらいか
- 想定外の自体で壊れにくいか

